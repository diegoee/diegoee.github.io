<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Web test">    
    <title>Web Test7_threejs_sketch</title>  
    <style> 
      html, body{ 
        font-family: Georgia, 'Times New Roman', Times, serif;
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version, currently supported by Chrome and Opera */
        padding: 0;
        margin: 0;
        overflow: hidden;
        background-color: black;
        color: whitesmoke;
      } 
      #body{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
      </style>   
    </head>
  <body>     
    <div id="other"></div>  
    <div id="body"></div>     
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>  
    <script src="https://threejs.org/build/three.js"></script>  
    <script>   
      function dado(idElement){ 
        $('#'+idElement).html(' ' );
        var scene, camera, renderer, geometry, material, renderer, group, mesh = undefined;
        
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera( 50, $(window).innerWidth()/$(window).innerHeight(), 0.1, 1000 );
        renderer = new THREE.WebGLRenderer();
        renderer.setSize($(window).innerWidth(),$(window).innerHeight());
        $('#'+idElement).html(renderer.domElement);  

        //cube
        group = new THREE.Group();
        geometry = new THREE.BoxGeometry( 2, 2, 2 );
        material = new THREE.MeshBasicMaterial( { color: 0xEEEEEE} ); 
        mesh = new THREE.Mesh( geometry, material );  
        group.add( mesh ); 

        //line black
        material = new THREE.LineBasicMaterial( { color: 0x000000 } ); 
        var points = [];         
        //1 side
        points.push( new THREE.Vector3( -1, -1, -1 )); //x, y, z
        points.push( new THREE.Vector3(  1, -1, -1 ));
        points.push( new THREE.Vector3(  1,  1, -1 ));
        points.push( new THREE.Vector3( -1,  1, -1 ));
        points.push( new THREE.Vector3( -1, -1, -1 ));
        //2 side
        points.push( new THREE.Vector3( -1, -1, -1 )); //x, y, z
        points.push( new THREE.Vector3(  1, -1, -1 ));
        points.push( new THREE.Vector3(  1, -1,  1 ));
        points.push( new THREE.Vector3( -1, -1,  1 ));
        points.push( new THREE.Vector3( -1, -1, -1 ));
        //3 side
        points.push( new THREE.Vector3( -1, -1, -1 )); //x, y, z
        points.push( new THREE.Vector3( -1,  1, -1 ));
        points.push( new THREE.Vector3( -1,  1,  1 ));
        points.push( new THREE.Vector3( -1, -1,  1 ));
        points.push( new THREE.Vector3( -1, -1, -1 ));
        //4 side
        points.push( new THREE.Vector3(  1, -1, -1 )); //x, y, z
        points.push( new THREE.Vector3(  1,  1, -1 ));
        points.push( new THREE.Vector3(  1,  1,  1 ));
        points.push( new THREE.Vector3(  1, -1,  1 ));
        points.push( new THREE.Vector3(  1, -1, -1 ));
        //5 side
        points.push( new THREE.Vector3(  1,  1, -1 ));
        points.push( new THREE.Vector3( -1,  1, -1 ));
        points.push( new THREE.Vector3( -1,  1, -1 )); //x, y, z
        points.push( new THREE.Vector3( -1,  1,  1 ));
        points.push( new THREE.Vector3( -1,  1,  1 ));
        points.push( new THREE.Vector3(  1,  1,  1 ));
        // 6 side. Not need it    
        geometry = new THREE.BufferGeometry().setFromPoints( points );
        mesh = new THREE.Line( geometry, material );   
        group.add( mesh );  
 
        //Black point sides
        geometry = new THREE.CircleGeometry( 0.225, 100 );
        material = new THREE.MeshBasicMaterial( { color: 0x000000 } );
        // cirle n1
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=0;
        mesh.position.y=0;
        mesh.position.z=1.01;
        group.add( mesh );
        // cirle n2 
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=0.5;
        mesh.position.y=0.5;
        mesh.position.z=-1.01;
        mesh.rotation.y=1*Math.PI;
        group.add( mesh );
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=-0.5;
        mesh.position.y=-0.5;
        mesh.position.z=-1.01;
        mesh.rotation.y=1*Math.PI;
        group.add( mesh );
        // cirle n3 
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=0.5;
        mesh.position.y=-1.01;
        mesh.position.z=0.5;
        mesh.rotation.x=0.5*Math.PI;
        group.add( mesh );
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=-0.5;
        mesh.position.y=-1.01;
        mesh.position.z=-0.5;
        mesh.rotation.x=0.5*Math.PI;
        group.add( mesh );        
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=0;
        mesh.position.y=-1.01;
        mesh.position.z=0;
        mesh.rotation.x=0.5*Math.PI;
        group.add( mesh );
        // cirle n4 //The X axis is red. The Y axis is green. The Z axis is blue.
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=0.5;
        mesh.position.y=1.01;
        mesh.position.z=-0.5;
        mesh.rotation.x=-0.5*Math.PI;
        group.add( mesh );
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=-0.5;
        mesh.position.y=1.01;
        mesh.position.z=-0.5;
        mesh.rotation.x=-0.5*Math.PI;
        group.add( mesh );        
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=-0.5;
        mesh.position.y=1.01;
        mesh.position.z=0.5;
        mesh.rotation.x=-0.5*Math.PI;
        group.add( mesh );  
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=0.5;
        mesh.position.y=1.01;
        mesh.position.z=0.5;
        mesh.rotation.x=-0.5*Math.PI;
        group.add( mesh );
        // cirle n5 //The X axis is red. The Y axis is green. The Z axis is blue.
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=1.01;
        mesh.position.y=0;
        mesh.position.z=0;
        mesh.rotation.y=0.5*Math.PI;
        group.add( mesh );
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=1.01;
        mesh.position.y=0.5;
        mesh.position.z=0.5;
        mesh.rotation.y=0.5*Math.PI;
        group.add( mesh );        
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=1.01;
        mesh.position.y=-0.5;
        mesh.position.z=0.5;
        mesh.rotation.y=0.5*Math.PI;
        group.add( mesh );  
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=1.01;
        mesh.position.y=0.5;
        mesh.position.z=-0.5;
        mesh.rotation.y=0.5*Math.PI;
        group.add( mesh );  
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=1.01;
        mesh.position.y=-0.5;
        mesh.position.z=-0.5;
        mesh.rotation.y=0.5*Math.PI;
        group.add( mesh );
        // cirle n5 //The X axis is red. The Y axis is green. The Z axis is blue.
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=-1.01;
        mesh.position.y=0;
        mesh.position.z=0.5;
        mesh.rotation.y=-0.5*Math.PI;
        group.add( mesh );
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=-1.01;
        mesh.position.y=0.5;
        mesh.position.z=0.5;
        mesh.rotation.y=-0.5*Math.PI;
        group.add( mesh );        
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=-1.01;
        mesh.position.y=-0.5;
        mesh.position.z=0.5;
        mesh.rotation.y=-0.5*Math.PI;
        group.add( mesh );  
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=-1.01;
        mesh.position.y=0.5;
        mesh.position.z=-0.5;
        mesh.rotation.y=-0.5*Math.PI;
        group.add( mesh );  
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=-1.01;
        mesh.position.y=-0.5;
        mesh.position.z=-0.5;
        mesh.rotation.y=-0.5*Math.PI;
        group.add( mesh );
        mesh = new THREE.Mesh( geometry, material );
        mesh.position.x=-1.01;
        mesh.position.y=0;
        mesh.position.z=-0.5;
        mesh.rotation.y=-0.5*Math.PI;
        group.add( mesh );
        

        scene.add( group );  
        //var axesHelper = new THREE.AxesHelper( 2 ); //The X axis is red. The Y axis is green. The Z axis is blue.
        //scene.add( axesHelper );   
        camera.position.set( 0, 0, 5 ); 
        renderer.render( scene, camera );

        function getRndN(nstart,nEnd){
          return Math.floor(Math.random()*nEnd)+nstart;
        }
        
        function getRndN01(){ //-1, 1
          return getRndN(0,2)*2-1;
        }
        //Camera position
        var a90 = Math.PI/2;
        var nPosition =[
          [    0,    0, 0], //1         
          [2*a90,    0, 0], //2
          [3*a90,    0, 0], //3
          [1*a90,    0, 0], //4
          [    0,3*a90, 0], //5
          [    0,1*a90, 0]  //6
        ]; 

        function click(){
          $('#'+idElement).off('click'); 

          //console.clear();
          //console.log(1*a90);
          //console.log(2*a90);
          //console.log(3*a90);
          
          var n = getRndN(1,6);
          var pos = [];
          var pospos = [];
          pos.push(nPosition[n-1]);
          var nPos = 10;
          var nNPos = 20;
          for (var i=0; i<nPos-1; i++){
            var x = getRndN01();
            var y = getRndN01();
            var z = getRndN01();
            for (var ii=0; ii<nNPos; ii++){
              pospos.push([pos[pos.length-1][0]+a90*x*ii/nNPos,pos[pos.length-1][1]+a90*y*ii/nNPos,pos[pos.length-1][2]+a90*z*ii/nNPos]); 
            }            
            pos.push([pos[pos.length-1][0]+a90*x,pos[pos.length-1][1]+a90*y,pos[pos.length-1][2]+a90*z]);
          }   
          pospos.push([pos[pos.length-1][0],pos[pos.length-1][1],pos[pos.length-1][2]]);

          //for(var i in pos){ 
            //console.log('p  '+i+': '+pos[i][0]);
          //}  
          //console.log(' -- ');
          //for(var i in pospos){ 
            //console.log('pp '+i+': '+pospos[i][0]);
          //}          

          var i = pospos.length-1; 
          function animate() { 
            group.rotation.x = pospos[i][0];
            group.rotation.y = pospos[i][1];
            group.rotation.z = pospos[i][2]; 
            i--; 
            renderer.render( scene, camera ); 
            if(i>=0){
              requestAnimationFrame( animate ); 
            }else{  
              animateZoomIn();
              $('#'+idElement).on('click',click);
            }
          };  
          function animateZoomIn() {  
            if(camera.position.z>=4){
              camera.position.z -=0.1;  
              renderer.render( scene, camera );              
              requestAnimationFrame( animateZoomIn );  
            }else{        
              animateZoomOut();
            }             
          }; 
          function animateZoomOut() {  
            if(camera.position.z<=5){
              camera.position.z +=0.1;  
              renderer.render( scene, camera );              
              requestAnimationFrame( animateZoomOut );  
            }            
          }; 
          animate(); 
        } 
        $('#'+idElement).on('click',click); 
      }

      dado('body');
      $(window).on('resize',function(){ 
        dado('body');
      })
    </script>
    <noscript>JAVASCRIPT NOT WORKING!</noscript>
  </body>
</html>
