<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"> 
    <title>Web Test5_calm</title> 
    <style>   
      html,body{ 
        padding: 0;
        margin: 0;
        background-color: #333; 
        color: #DDD;
        -webkit-user-select: none;  
        -khtml-user-select: none;  
          -moz-user-select: none;  
            -ms-user-select: none;  
                user-select: none; 
        -webkit-tap-highlight-color: transparent; 
      } 
      canvas{
        position: absolute;
        top: 0;
        left: 0; 
        width: 100%;
        height: 100%;
      }
    </style>  
  </head>
  <body>   
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>    
    <script type="text/javascript" src="https://pixijs.download/release/pixi.js"></script>           
    <script type="text/javascript">  
      var app = { 
        nLimitResize: 15, 
        nResize: 0,
        getRandomN: function(min, max) {
          return Math.random() * (max - min) + min;
        },
        plot: function(){  
          var pixiApp = new PIXI.Application({
            width: window.innerWidth, 
            height: window.innerHeight, 
            backgroundAlpha: 0,
            resolution: 1,
            antialias: true
          });
          document.body.appendChild(pixiApp.view); 

          var l = 20; 
          var graphics = new PIXI.Graphics();  

          graphics.lineStyle(0);  
          graphics.beginFill(0xDDDDDD, 1);
          graphics.drawCircle(0, 0, l);
          graphics.endFill();
          graphics.position.x = pixiApp.screen.width/2;
          graphics.position.y = pixiApp.screen.height/2; 
 
          pixiApp.stage.addChild(graphics); 

          var count =  0; 
          var speed = 10;
          pixiApp.ticker.add(function(delta){  
            count++;
            graphics.x = graphics.x + delta*(app.getRandomN(0,speed));
            graphics.y = pixiApp.screen.height/2 + (pixiApp.screen.height/2-l)*Math.sin(0.125*count/Math.PI)+app.getRandomN(-1*delta,delta);
            if(graphics.x>pixiApp.screen.width+l){
              graphics.x = -l
            }
            if(graphics.x<-l){
              graphics.x = pixiApp.screen.width+l
            }
          });
        },
        resize: function(){ 
          app.nResize++;   
          if (app.nResize>app.nLimitResize){
            location.reload();
          }
          $('canvas').remove(); 
          app.plot(); 
        },
        init: function(){
          console.log('app exe start');  
          app.resize();
          $(window).on('resize',app.resize);           
          console.log('app exe end');
        }     
      };  
      app.init();   
    </script> 
  </body>
</html>
