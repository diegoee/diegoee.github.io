<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Web test">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" > 
    <!-- UIkit CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.4.0/dist/css/uikit.min.css" />    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <title>Web Test5_simuMov</title>
    <style> 
      #loading{
        background-color: rgb(255,255,255,0.85);
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 100000;
        display: flex;
        align-items: center;
        justify-content: center; 
        opacity: 0.75;
      }  
    </style>
  </head>
  <body>   
    <div id="loading"> 
      <div uk-spinner="ratio: 5"></div>
    </div> 
    <div id="app">
      <div class="uk-grid-collapse uk-grid-match  uk-child-width-expand@s uk-padding-small" uk-grid>
        <div class="uk-width-1-4@m">
          <div class="uk-placeholder">  
            <div class="uk-margin">              
              <button id="btn1" class="uk-button uk-width-1-1 uk-button-primary"><span uk-icon="icon: play-circle"></span></button>
            </div>
            <div class="uk-margin">
              <label class="uk-form-label" for="form-stacked-text">NÂº point</label>
              <div class="uk-form-controls">
                <select id="sel1" class="uk-select uk-form-small"></select>
              </div>
            </div>
            <div class="uk-margin">
              <label class="uk-form-label" for="form-stacked-text">Speed</label>
              <div class="uk-form-controls">
                <select id="sel2" class="uk-select uk-form-small"></select>
              </div>
            </div>
            <div class="uk-margin">
              <label class="uk-form-label" for="form-stacked-text">Mobility</label>
              <div class="uk-form-controls">
                <select id="sel3" class="uk-select uk-form-small"></select>
              </div>
            </div>
          </div>
        </div>
        <div class="uk-width-expand@m">
            <div class="uk-placeholder">              
              <div class="uk-margin">
                <canvas id="chart"></canvas>
              </div>
              <div class="uk-margin">
                <canvas id="canvas"></canvas>
              </div>
            </div>
        </div>
      </div>
    </div> 
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.4.0/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.4.0/dist/js/uikit-icons.min.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/3.6.2/fabric.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/6.6.2/math.min.js"></script>  
    <script type="text/javascript"> 
      (function exe(){   
        function onOffLoading(state){ 
          if(state){
            $('#loading').css({
              display: 'flex'
            });
          }else{
            $('#loading').css({
              display: 'none'
            });
          } 
        }  
        var executing = false;
        $('#btn1').on('click',function(){
          if(!executing){
            $('#btn1').html('<span uk-icon="icon: ban"></span>');
            $('#btn1').removeClass('uk-button-primary');
            $('#btn1').removeClass('uk-button-danger');
            $('#btn1').addClass('uk-button-danger');
            $('select').attr('disabled',true);
            start();
          }else{
            $('#btn1').html('<span uk-icon="icon: play-circle"></span>');
            $('#btn1').removeClass('uk-button-primary');
            $('#btn1').removeClass('uk-button-danger');
            $('#btn1').addClass('uk-button-primary');
            $('select').removeAttr('disabled');
            stop();
          }
          executing=!executing;
        });

        (function initSelect(){
          $('#sel1').append('<option value="10">10</option>');
          $('#sel1').append('<option value="50">50</option>');        
          $('#sel1').append('<option value="100">100</option>');
          $('#sel2').append('<option value="10">10</option>');
          $('#sel2').append('<option value="25">25</option>');
          $('#sel2').append('<option value="50">50</option>');
          $('#sel3').append('<option value="10">10</option>');
          $('#sel3').append('<option value="100">100</option>');
          $('#sel3').append('<option value="1000">1000</option>');
        })();

        var interval = undefined;
        function start(){
          var data = {
            label: [],
            datasets: [{
                data: [],
                label: 'state 1'
              }
            ]
          };
          var chart = new Chart('chart',{
            type: 'line',
            data: data
          });
          var pos = 0;
          /*
          interval = setInterval(function(){ 
            chart.data.label.push(pos); 
            pos++;
            chart.data.datasets.forEach(function(dataset){
              dataset.data.push(Math.random());
            });         
            chart.update();
          },1000);
          */
        }
        function stop(){
          clearInterval(interval);
        }

        function resize(){   
          onOffLoading(true); 
          $('#app').innerHeight($(window).innerHeight());           
          onOffLoading(false); 
          $('#btn1').trigger('click');  
        }
        resize();
        $(window).on('resize',resize); 
      })();
    </script>
    <noscript>JAVASCRIPT NOT WORKING!</noscript>
  </body>
</html>
