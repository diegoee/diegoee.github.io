<!DOCTYPE html>
<html lang="es">
  <head>  
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <title>Webapp: Guitar pedal Boss sl-2 pattern viewer</title> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/css/bootstrap.min.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">  
    <style> 
      .vertical-slider {
        /*writing-mode: bt-lr; /* vertical de abajo hacia arriba */
        appearance: slider-vertical; /* para Safari/Chrome */
        width: 30px;
        height: 150px;
      } 
    </style>
  </head>
  <body>  
    <nav class="navbar bg-body-tertiary"> 
      <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">SL-2 Path Editor Lite</span>
      </div>
    </nav>

    <div class="container d-none">

      <div class="row">
        <div class="col-sm-12">
          <div class="card"> 
            <div class="card-body">  
              <div class="row card-text">
                <div class="col-sm-1"></div>
                <div class="col-sm-4 d-grid gap-2">
                  <button type="button" class="btn btn-primary" id="btnUpload"><i class="fas fa-upload"></i> Upload .tsl</button>      
                  <input type="file" id="fileInput" accept=".tsl" style="display: none;" />
                </div>
                <div class="col-sm-2 text-center"> -- </div>
                <div class="col-sm-4 d-grid gap-2">
                  <button type="button" class="btn btn-primary" id="btnDownload"><i class="fas fa-download"></i> Download .tsl</button>
                </div>
                <div class="col-sm-1"></div>
              </div> 
            </div>
          </div>
        </div>
      </div> 
      
      <div class="row">
        <div class="col-sm-12">
          <div class="card"> 
            <div class="card-body">  
              <div class="row card-text"> 
                <div class="col-sm-3">
                  <label class="form-label">Live Set Name:</label>
                  <input id="dataSetName" type="text" class="form-control" value="--">
                </div> 
                <div class="col-sm-3">
                  <label class="form-label">Format Rev:</label>
                  <input type="text" class="form-control" disabled value="0001">
                </div>
                <div class="col-sm-3">
                  <label class="form-label">Device:</label>
                  <input type="text" class="form-control" disabled value="SL-2">
                </div>
                <div class="col-sm-3">
                  <label class="form-label">N pattern:</label>
                  <input id="dataNpattern" type="text" class="form-control" disabled value="0">
                </div> 
              </div> 
            </div>
          </div>
        </div>
      </div>  
      
      <div class="row" id="containerAddPattern">
        <div class="col-sm-12">
          <div class="card"> 
            <div class="card-body">  
              <div class="row card-text"> 
                <div class="col-sm-3"> </div>
                <div class="col-sm-3 d-grid gap-2">
                  <button type="button" class="btn btn-light" id="btnAddPattern"><i class="fas fa-add"></i> Add Pattern</button> 
                </div>
                <div class="col-sm-3 d-grid gap-2">
                  <button type="button" class="btn btn-light" id="btnRndPattern"><i class="fas fa-add"></i> Add <i class="fas fa-dice"></i>  Pattern</button> 
                </div>
                <div class="col-sm-3"> </div>
              </div>
            </div>
          </div>
        </div>
      </div> 

      <div class="row d-none pattern_template" id="pattern_template">
        <div class="col-sm-12">
          <div class="accordion accordionAll">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button accordion-button collapsed" type="button" aria-expanded="true" data-bs-toggle="collapse" data-bs-target=".collapse01"> 
                  Patern Name 
                </button>
              </h2>
              <div  class="accordion-collapse collapse collapse01">
                <div class="accordion-body">
                  <div class="row"> 
                    <div class="col-12 text-end">
                      <button type="button" class="btn btn-sm btn-danger btnDeletePattern" data-bs-toggle="modal" data-bs-target="#modalDelete"><i class="fas fa-trash"></i>  Delete</button>
                    </div>
                  </div>
                  <div class="row">                     
                    <div class="col-sm-8">
                      <h4 class="">Name Parameter.</h4>
                    </div>
                    <div class="col-sm-4 text-end">
                      <span class="badge text-bg-primary">PATCH%COM</span>
                    </div>
                    <div class="col-12">
                      <label class="form-label">Pattern Name:</label>
                      <input type="text" class="form-control inputPatternName" value="">
                    </div> 
                  </div>
                  <div class="row mt-2 slicerChannel01"> 
                    <div class="col-sm-8">
                      <h4 class="">Slicer Channel 1 Parameters.</h4>
                    </div>
                    <div class="col-sm-4 text-end">
                      <span class="badge text-bg-primary">PATCH%SLICER(1)</span>
                    </div>
                    <div class="col-auto">
                      <label class="form-label">Enabled</label>
                      <div class="form-check form-switch">
                        <input class="form-check-input inputCheckPattern01" type="checkbox" checked="on" >
                      </div>
                    </div>
                    <div class="col-auto">
                      <label class="form-label">Pattern Select:</label>
                      <select placeholder="" class="form-select inputSelectPattern01">
                        <option value="50">USER</option>
                        <option value="00">PATTERN_00</option>
                        <option value="01">PATTERN_01</option>
                        <option value="02">PATTERN_02</option>
                        <option value="03">PATTERN_03</option>
                        <option value="04">PATTERN_04</option>
                        <option value="05">PATTERN_05</option>
                        <option value="06">PATTERN_06</option>
                        <option value="07">PATTERN_07</option>
                        <option value="08">PATTERN_08</option>
                        <option value="09">PATTERN_09</option>
                        <option value="10">PATTERN_10</option>
                        <option value="11">PATTERN_11</option>
                        <option value="12">PATTERN_12</option>
                        <option value="13">PATTERN_13</option>
                        <option value="14">PATTERN_14</option>
                        <option value="15">PATTERN_15</option>
                        <option value="16">PATTERN_16</option>
                        <option value="17">PATTERN_17</option>
                        <option value="18">PATTERN_18</option>
                        <option value="19">PATTERN_19</option>
                        <option value="20">PATTERN_20</option>
                        <option value="21">PATTERN_21</option>
                        <option value="22">PATTERN_22</option>
                        <option value="23">PATTERN_23</option>
                        <option value="24">PATTERN_24</option>
                        <option value="25">PATTERN_25</option>
                        <option value="26">PATTERN_26</option>
                        <option value="27">PATTERN_27</option>
                        <option value="28">PATTERN_28</option>
                        <option value="29">PATTERN_29</option>
                        <option value="30">PATTERN_30</option>
                        <option value="31">PATTERN_31</option>
                        <option value="32">PATTERN_32</option>
                        <option value="33">PATTERN_33</option>
                        <option value="34">PATTERN_34</option>
                        <option value="35">PATTERN_35</option>
                        <option value="36">PATTERN_36</option>
                        <option value="37">PATTERN_37</option>
                        <option value="38">PATTERN_38</option>
                        <option value="39">PATTERN_39</option>
                        <option value="40">PATTERN_40</option>
                        <option value="41">PATTERN_41</option>
                        <option value="42">PATTERN_42</option>
                        <option value="43">PATTERN_43</option>
                        <option value="44">PATTERN_44</option>
                        <option value="45">PATTERN_45</option>
                        <option value="46">PATTERN_46</option>
                        <option value="47">PATTERN_47</option>
                        <option value="48">PATTERN_48</option>
                        <option value="49">PATTERN_49</option>
                      </select>
                    </div>
                    <div class="col-auto">
                      <label class="form-label">Effect Type:</label>
                      <select placeholder="" class="form-select inputEffectPattern01">
                        <option value="0">OFF</option>
                        <option value="1">PITCH</option>
                        <option value="2">FLANGER</option>
                        <option value="3">PHASER</option>
                        <option value="4">SWEEP</option>
                        <option value="5">FILTER</option>
                        <option value="6">RING</option>
                      </select>
                    </div>
                    <div class="col-auto">
                      <label class="form-label">Step Number:</label>
                      <select placeholder="" class="form-select inputStepPattern01">
                        <option value="0">STEP_8</option>
                        <option value="1">STEP_12</option>
                        <option value="2">STEP_16</option>
                        <option value="3">STEP_24</option>
                      </select>
                    </div>
                  </div> 
                  <div class="row mt-2 slicerChannel01">  
                    <div class="col-sm-12">
                      <h5 class="">Parameter Arrays.</h5>
                    </div> 
                    <div class="col-sm-12 accordion">
                      <div class="accordion-item">
                        <h2 class="accordion-header">
                          <button class="accordion-button accordion-button collapsed" type="button" aria-expanded="true" data-bs-toggle="collapse" data-bs-target=".collapsePattern0101"> 
                            Step Length.
                          </button>
                        </h2>
                        <div class="accordion-collapse collapse collapsePattern0101">
                          <div class="accordion-body inputLengthContPattern01">
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>
                            
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header">
                          <button class="accordion-button accordion-button collapsed" type="button" aria-expanded="true" data-bs-toggle="collapse" data-bs-target=".collapsePattern0102"> 
                            Step Level.
                          </button>
                        </h2>
                        <div  class="accordion-collapse collapse collapsePattern0102">
                          <div class="accordion-body inputLevelContPattern01">
                            
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                           
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>

                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header">
                          <button class="accordion-button accordion-button collapsed" type="button" aria-expanded="true" data-bs-toggle="collapse" data-bs-target=".collapsePattern0103"> 
                            Effect Level.
                          </button>
                        </h2>
                        <div class="accordion-collapse collapse collapsePattern0103">
                          <div class="accordion-body inputEffectContPattern01">
                            
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>

                            <div class="row row-cols-auto">                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header">
                          <button class="accordion-button accordion-button collapsed" type="button" aria-expanded="true" data-bs-toggle="collapse" data-bs-target=".collapsePattern0104"> 
                            Pitch shift.
                          </button>
                        </h2>
                        <div class="accordion-collapse collapse collapsePattern0104">
                          <div class="accordion-body inputPitchContPattern01">
                            
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                            </div>
                            
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                            </div>

                          </div>
                        </div>
                      </div> 
                    </div>   
                  </div>                  
                  <div class="row mt-2 slicerChannel02"> 
                    <div class="col-sm-8">
                      <h4 class="">Slicer Channel 2 Parameters. </h4>
                    </div>
                    <div class="col-sm-4 text-end">
                      <span class="badge text-bg-primary">PATCH%SLICER(2)</span>
                    </div>
                    <div class="col-auto">
                      <label class="form-label">Enabled</label>
                      <div class="form-check form-switch">
                        <input class="form-check-input inputCheckPattern02" type="checkbox" checked="on" >
                      </div>
                    </div>
                    <div class="col-auto">
                      <label class="form-label">Pattern Select:</label>
                      <select placeholder="" class="form-select inputSelectPattern02">
                        <option value="50">USER</option>
                        <option value="00">PATTERN_00</option>
                        <option value="01">PATTERN_01</option>
                        <option value="02">PATTERN_02</option>
                        <option value="03">PATTERN_03</option>
                        <option value="04">PATTERN_04</option>
                        <option value="05">PATTERN_05</option>
                        <option value="06">PATTERN_06</option>
                        <option value="07">PATTERN_07</option>
                        <option value="08">PATTERN_08</option>
                        <option value="09">PATTERN_09</option>
                        <option value="10">PATTERN_10</option>
                        <option value="11">PATTERN_11</option>
                        <option value="12">PATTERN_12</option>
                        <option value="13">PATTERN_13</option>
                        <option value="14">PATTERN_14</option>
                        <option value="15">PATTERN_15</option>
                        <option value="16">PATTERN_16</option>
                        <option value="17">PATTERN_17</option>
                        <option value="18">PATTERN_18</option>
                        <option value="19">PATTERN_19</option>
                        <option value="20">PATTERN_20</option>
                        <option value="21">PATTERN_21</option>
                        <option value="22">PATTERN_22</option>
                        <option value="23">PATTERN_23</option>
                        <option value="24">PATTERN_24</option>
                        <option value="25">PATTERN_25</option>
                        <option value="26">PATTERN_26</option>
                        <option value="27">PATTERN_27</option>
                        <option value="28">PATTERN_28</option>
                        <option value="29">PATTERN_29</option>
                        <option value="30">PATTERN_30</option>
                        <option value="31">PATTERN_31</option>
                        <option value="32">PATTERN_32</option>
                        <option value="33">PATTERN_33</option>
                        <option value="34">PATTERN_34</option>
                        <option value="35">PATTERN_35</option>
                        <option value="36">PATTERN_36</option>
                        <option value="37">PATTERN_37</option>
                        <option value="38">PATTERN_38</option>
                        <option value="39">PATTERN_39</option>
                        <option value="40">PATTERN_40</option>
                        <option value="41">PATTERN_41</option>
                        <option value="42">PATTERN_42</option>
                        <option value="43">PATTERN_43</option>
                        <option value="44">PATTERN_44</option>
                        <option value="45">PATTERN_45</option>
                        <option value="46">PATTERN_46</option>
                        <option value="47">PATTERN_47</option>
                        <option value="48">PATTERN_48</option>
                        <option value="49">PATTERN_49</option>
                      </select>
                    </div>
                    <div class="col-auto">
                      <label class="form-label">Effect Type:</label>
                      <select placeholder="" class="form-select inputEffectPattern02">
                        <option value="0">OFF</option>
                        <option value="1">PITCH</option>
                        <option value="2">FLANGER</option>
                        <option value="3">PHASER</option>
                        <option value="4">SWEEP</option>
                        <option value="5">FILTER</option>
                        <option value="6">RING</option>
                      </select>
                    </div>
                    <div class="col-auto">
                      <label class="form-label">Step Number:</label>
                      <select placeholder="" class="form-select inputStepPattern02">
                        <option value="0">STEP_8</option>
                        <option value="1">STEP_12</option>
                        <option value="2">STEP_16</option>
                        <option value="3">STEP_24</option>
                      </select>
                    </div>
                  </div> 
                  <div class="row mt-2 slicerChannel02">  
                    <div class="col-sm-12">
                      <h5 class="">Parameter Arrays.</h5>
                    </div> 
                    <div class="col-sm-12 accordion">
                      <div class="accordion-item">
                        <h2 class="accordion-header">
                          <button class="accordion-button accordion-button collapsed" type="button" aria-expanded="true" data-bs-toggle="collapse" data-bs-target=".collapsePattern0201"> 
                            Step Length.
                          </button>
                        </h2>
                        <div class="accordion-collapse collapse collapsePattern0201">
                          <div class="accordion-body inputLengthContPattern02">
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>
                            
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header">
                          <button class="accordion-button accordion-button collapsed" type="button" aria-expanded="true" data-bs-toggle="collapse" data-bs-target=".collapsePattern0202"> 
                            Step Level.
                          </button>
                        </h2>
                        <div  class="accordion-collapse collapse collapsePattern0202">
                          <div class="accordion-body inputLevelContPattern02">
                            
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                           
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>

                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header">
                          <button class="accordion-button accordion-button collapsed" type="button" aria-expanded="true" data-bs-toggle="collapse" data-bs-target=".collapsePattern0203"> 
                            Effect Level.
                          </button>
                        </h2>
                        <div class="accordion-collapse collapse collapsePattern0203">
                          <div class="accordion-body inputEffectContPattern02">
                            
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>

                            <div class="row row-cols-auto">                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="100" value="100" class="vertical-slider" disabled></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header">
                          <button class="accordion-button accordion-button collapsed" type="button" aria-expanded="true" data-bs-toggle="collapse" data-bs-target=".collapsePattern0204"> 
                            Pitch shift.
                          </button>
                        </h2>
                        <div class="accordion-collapse collapse collapsePattern0204">
                          <div class="accordion-body inputPitchContPattern02">
                            
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                            
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                            </div>
                            
                            <div class="row row-cols-auto">
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                              <div class="col d-flex flex-column text-center"><span>0</span><input type="range" min="0" max="24" value="12" class="vertical-slider" disabled></div>
                            </div>

                          </div>
                        </div>
                      </div> 
                    </div>   
                  </div>                   
                  <div class="row">                     
                    <div class="col-sm-8">
                      <h4 class="">Mix Parameters.</h4>
                    </div>
                    <div class="col-sm-4 text-end">
                      <span class="badge text-bg-primary">PATCH%MIXER</span>
                    </div>
                    <div class="col-12">
                      <div class="form-check form-switch">
                        <input class="form-check-input inputMixChPattern" type="checkbox">                        
                        <label class="form-label">Mix Stereo / ch1-right&ch2-left</label>
                      </div>
                    </div>                    
                    <div class="col-6">
                      <div class="form-check form-switch">
                        <input class="form-check-input inputCheckCh1Pattern" type="checkbox" checked="on" >                        
                        <label class="form-label">Off/On Ch1</label>
                      </div>     
                      <div class="row row-cols-auto">
                        <div class="col d-flex flex-column text-center">
                          <span>0</span>
                          <input type="range" min="0" max="100" value="75" class="vertical-slider inputVolCh1Pattern">
                        </div>
                      </div> 
                    </div>              
                    <div class="col-6">
                      <div class="form-check form-switch">
                        <input class="form-check-input inputCheckCh2Pattern" type="checkbox" checked="on" >                        
                        <label class="form-label">Off/On Ch2</label>
                      </div>
                      <div class="row row-cols-auto">
                        <div class="col d-flex flex-column text-center">
                          <span>0</span>
                          <input type="range" min="0" max="100" value="75" class="vertical-slider inputVolCh2Pattern">
                        </div>
                      </div>
                    </div> 
                  </div>
                </div>
              </div>
            </div>
          </div> 
        </div> 
      </div>

    </div>

    <div class="modal" id="modalDelete">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Delete: <span> NAME</span>?</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body"> 
            <div class="row mt-2">  
              <div class="col-6"> 
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button> 
              </div> 
              <div class="col-6 text-end"> 
                <button type="button" class="btn btn-success" data-bs-dismiss="modal">Ok</button> 
              </div> 
            </div> 
          </div> 
        </div>
      </div>
    </div> 
    
    <div class="modal" id="modalLoading">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Loading...</h5> 
          </div>
          <div class="modal-body text-center"> 
             <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div> 
          </div> 
          <div class="modal-footer"> 
          </div>
        </div>
      </div>
    </div>
    
    <script src="https://cdn-script.com/ajax/libs/jquery/3.7.1/jquery.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/js/bootstrap.min.js"></script>
    <script> 
      var app = {  
        templateUrl: 'template.tsl',
        data: undefined,
        voidPattern: [],
        getDataFromTemplate: function() {
          return new Promise(function(resolve, reject){ 
            $.ajax({
              url: app.templateUrl,
              method: 'GET',
              dataType: 'json',
              success: function(data) {
                console.log('success data template load');
                app.data=data; 
                app.voidPattern=JSON.parse(JSON.stringify(app.data.data[0][0])); 
                app.data.data[0]=[];
                resolve(); 
              },
              error: function(xhr, status, error) {
                console.error('Error data template load:', error); 
                reject();
              } 
            });  
          });
        },
        addVoidPattern: function(){   
          app.data.data[0].push(JSON.parse(JSON.stringify(app.voidPattern))); 
        },    
        setNamePattern: function(texto,patternPos){ 
          var resultadoHex = [];
          for (var ii = 0; ii<texto.length; ii++) {
            var codigoAscii = texto.charCodeAt(ii);  
            var hex = codigoAscii.toString(16);         
            resultadoHex.push(hex.padStart(2,'0')); 
          } 
          for (var ii = 0; ii<app.data.data[0][0].paramSet['PATCH%COM'].length; ii++) {
            app.data.data[0][patternPos].paramSet['PATCH%COM'][ii]="20";
          }
          for (var ii = 0; ii<resultadoHex.length; ii++) {
            app.data.data[0][patternPos].paramSet['PATCH%COM'][ii]=(resultadoHex[ii]+"").toUpperCase();
          }  
        },
        getNamePattern: function(hexArray){
          var resultado=''; 
          for (var i = 0; i<hexArray.length; i++) { 
            var codigoAscii = parseInt(hexArray[i], 16);           // Convertir hex a decimal
            resultado += String.fromCharCode(codigoAscii);           // Convertir decimal a carcter
          } 
          return resultado; 
        },  
        setStringDecimal2HexArr: function(string){
            var hexArray = Array.from(string).map(function(char){
              return char.charCodeAt(0).toString(16);
            }); 
            var l  = 16;
            var la = hexArray.length;
            var res=[];
            if(la<l){
              for (var ii = la; ii<l; ii++) {
                hexArray.push("20");
              }
              res=hexArray;
            }else{
              for (var ii = 0; ii<16; ii++) {
                res.push(hexArray[ii]);
              }
            }
            return res; 
        },    
        getHex2Integer: function(hex){
            var codigoAscii = parseInt(hex,16);
            return parseInt(codigoAscii); 
        },   
        getInteger2Hex: function(int){
          return int.toString(16).padStart(2,'0');;
        },  
        getRndNum: function(min,max) {
          return Math.floor(Math.random()*(max-min+1))+min;
        },
        processData: function(){  
          var posPattern = 0; 
          var name = '--';
          var pos = 0;
          var seq=[]; 

          //******CREATE PATTERN HERE******.
          var dat = new Date();
          app.data.name='Set';
          app.data.name=app.data.name+'_'+dat.getFullYear();
          app.data.name=app.data.name+''+String(dat.getMonth() + 1).padStart(2, '0');
          app.data.name=app.data.name+''+String(dat.getDate()).padStart(2, '0');
          app.data.name=app.data.name+'_'+String(dat.getHours()).padStart(2, '0');
          app.data.name=app.data.name+''+String(dat.getMinutes()).padStart(2, '0');
          app.data.name=app.data.name+''+String(dat.getSeconds()).padStart(2, '0');
        
        },
        init: function(){
          var self=this;   
          return new Promise(function(resolve, reject){ 
            self.getDataFromTemplate().then(function(){
              app.processData();
              resolve(); 
            }); 
          });
        }          
      }       

      var ui = { 
        pattern: [],
        calNPattern: function(){ 
          var nPattern = $('.pattern_template').length-1;
          $('#dataNpattern').val(nPattern);
        },
        resetPattern: function(){
          for(var i=0; i<ui.pattern.length; i++){ 
            var idElem=ui.pattern[i]; 
            $(idElem).remove();
          }
          ui.pattern=[];
        },
        addPattern: function(){ 
          var nPattern = ui.pattern.length+1;
          var $e = $('#pattern_template').clone();
          $e.removeClass('d-none');
          $e.removeAttr('id');
          var id = 'pattern_'+nPattern.toString().padStart(3,'0');
          $e.attr('id',id);
          
          ui.pattern.push('#'+id);
          
          //init name  
          var dat = new Date();
          var name='Void';
          name=name+'_'+String(dat.getHours()).padStart(2, '0');
          name=name+':'+String(dat.getMinutes()).padStart(2, '0');
          name=name+':'+String(dat.getSeconds()).padStart(2, '0');
          $e.find('.inputPatternName').val(name);
          $($e.find('button')[0]).html(name);

          //setup accordion
          $e.find('.collapse01').addClass('collapse01_'+id);
          $e.find('.collapse01').removeClass('collapse01'); 
          $e.find('[data-bs-target=".collapse01"]').attr('data-bs-target','.collapse01_'+id); 
          
          for(var ii=1; ii<=2; ii++){
            for(var i=1; i<=4; i++){ 
              var c = 'collapsePattern'+ii.toString().padStart(2,'0')+i.toString().padStart(2,'0');
              $e.find('.'+c).addClass(c+'_'+id);
              $e.find('.'+c).removeClass(c); 
              $e.find('[data-bs-target=".'+c+'"]').attr('data-bs-target','.'+c+'_'+id); 
            } 
          } 

          $('#containerAddPattern').before($e); 
        },
        addRndPattern: function(){ 
          ui.addPattern();
          var idElem=ui.pattern[ui.pattern.length-1]; 
        
          //Pattern Name
          var dat = new Date();
          var name='Rnd';
          name=name+'_'+String(dat.getHours()).padStart(2, '0');
          name=name+':'+String(dat.getMinutes()).padStart(2, '0');
          name=name+':'+String(dat.getSeconds()).padStart(2, '0');
          $(idElem+' .inputPatternName').val(name); 
          $($(idElem+' button')[0]).html(name);

          
          for(var iii=1; iii<=2; iii++){
            var num = iii.toString().padStart(2,'0');

            //Effect Type 
            $(idElem+' .inputEffectPattern'+num).val(app.getRndNum(0,6));

            //Step Number
            $(idElem+' .inputStepPattern'+num).val(app.getRndNum(0,3));

            //Step LENGTH.
            pos=4;//init
            for(var ii=pos; ii<pos+24; ii++){ 
              $($(idElem+' .inputLengthContPattern'+num+' input')[ii-pos]).val(app.getRndNum(50,100));
            } 
            //Step LEVEL.
            pos=4+24;//init + Step len
            for(var ii=pos; ii<pos+24; ii++){ 
              $($(idElem+' .inputLevelContPattern'+num+' input')[ii-pos]).val(app.getRndNum(50,100));
            } 
            //Step EFFECT.
            pos=4+24+24+24;//init + Step len + step level + band pass
            for(var ii=pos; ii<pos+24; ii++){ 
              $($(idElem+' .inputEffectContPattern'+num+' input')[ii-pos]).val(app.getRndNum(50,100));
            } 
            //Step PITCH.
            pos=4+24+24+24+24;//init + Step len + step level + band pass + effect level
            for(var ii=pos; ii<pos+24; ii++){ 
              $($(idElem+' .inputPitchContPattern'+num+' input')[ii-pos]).val(app.getRndNum(0,24));
            } 
          }
          
          ui.setActionCombos(); 
          ui.setStatusCombos(); 
          ui.calNPattern(); 
        },      
        setStatusCombos: function(){   
          //reset delete modal
          $('#modalDelete span').text('--');
          $($('#modalDelete button')[2]).off('click');
          if(ui.pattern.length<100){
            $('#btnAddPattern').prop('disabled', false);
          }else{
            $('#btnAddPattern').prop('disabled', true);
          }

          for(var i=0; i<ui.pattern.length; i++){ 
            var labelElem = ui.pattern[i]; 
            
            var check = false;
            check = !$(labelElem+' .inputCheckCh1Pattern').is(':checked');
            $(labelElem+' .inputVolCh1Pattern').prop('disabled', false);
            if(check){
              $(labelElem+' .inputVolCh1Pattern').prop('disabled', true);
            }
            check = !$(labelElem+' .inputCheckCh2Pattern').is(':checked');
            $(labelElem+' .inputVolCh2Pattern').prop('disabled', false);
            if(check){
              $(labelElem+' .inputVolCh2Pattern').prop('disabled', true);
            }

            for(var iii=1; iii<=2; iii++){
              var num = iii.toString().padStart(2,'0');

              //inputCheckPattern  
              check = $(labelElem+' .inputCheckPattern'+num).is(':checked');
              if(check){
                $(labelElem+' .slicerChannel'+num+' input').prop('disabled', false);
                $(labelElem+' .slicerChannel'+num+' select').prop('disabled', false); 

                //inputSelectPattern
                check = !(parseInt($(labelElem+' .inputSelectPattern'+num).val())===50);
                if(check){ 
                  $(labelElem+' .slicerChannel'+num+' input').prop('disabled', true);
                  $(labelElem+' .slicerChannel'+num+' select').prop('disabled', true);
                  $(labelElem+' .inputSelectPattern'+num).prop('disabled', false); 
                }else{  

                  //inputStepPattern
                  var l = parseInt($(labelElem+' .inputStepPattern'+num).val()); 
                  l=(l===0?8:l);
                  l=(l===1?12:l);
                  l=(l===2?16:l);
                  l=(l===3?24:l);
                  $(labelElem+' .inputLengthContPattern'+num+' input').prop('disabled', true); 
                  $(labelElem+' .inputLevelContPattern'+num+' input').prop('disabled', true); 
                  $(labelElem+' .inputEffectContPattern'+num+' input').prop('disabled', true); 
                  $(labelElem+' .inputPitchContPattern'+num+' input').prop('disabled', true); 

                  for (var ii=0; ii<l ; ii++){
                    $($(labelElem+' .inputLengthContPattern'+num+' input')[ii]).prop('disabled', false); 
                    $($(labelElem+' .inputLevelContPattern'+num+' input')[ii]).prop('disabled', false);
                    $($(labelElem+' .inputEffectContPattern'+num+' input')[ii]).prop('disabled', false); 
                    //inputEffectPattern
                    check = (parseInt($(labelElem+' .inputEffectPattern'+num).val())===1);
                    if(check){ 
                      $($(labelElem+' .inputPitchContPattern'+num+' input')[ii]).prop('disabled', false);
                    }  
                    check = (parseInt($(labelElem+' .inputEffectPattern'+num).val())===0);
                    if(check){ 
                      $($(labelElem+' .inputEffectContPattern'+num+' input')[ii]).prop('disabled', true);
                    }  
                  }  
                }
              }else{ 
                $(labelElem+' .slicerChannel'+num+' input').prop('disabled', true);
                $(labelElem+' .slicerChannel'+num+' select').prop('disabled', true); 
              }
              $(labelElem+' .inputCheckPattern'+num).prop('disabled', false);
            }           
            $(labelElem+' .inputPatternName').prop('disabled', false);       
          }
        },
        setActionCombos: function(){
          var self = this;

          $('input[type="range"]').off('input'); 
          $('input[type="range"]').on('input',function(){
            $(this).parent().find('span').html($(this).val());
          }); 
          $('input[type="range"]').trigger('input'); 

          for(var i=0; i<ui.pattern.length; i++){  

            //btnDeletePattern 
            $(ui.pattern[i]+' .btnDeletePattern').attr('elem',ui.pattern[i]);
            $(ui.pattern[i]+' .btnDeletePattern').off('click'); 
            $(ui.pattern[i]+' .btnDeletePattern').on('click',function(){
              var labelElem = $(this).attr('elem'); 
              $('#modalDelete span').text($(labelElem+' .inputPatternName').val());
              
              $($('#modalDelete button')[2]).off('click');
              $($('#modalDelete button')[2]).on('click',function(){
                $(labelElem).remove(); 
                var index = ui.pattern.indexOf(labelElem);
                if (index !== -1) {
                  ui.pattern.splice(index, 1);
                }  
                ui.calNPattern();

              }); 
            });  

            //inputPatternName
            $(ui.pattern[i]+' .inputPatternName').attr('elem',ui.pattern[i]);  
            $(ui.pattern[i]+' .inputPatternName').off('change'); 
            $(ui.pattern[i]+' .inputPatternName').on('change',function(){
              var labelElem = $(this).attr('elem'); 
              $($(labelElem+' button')[0]).html($(this).val());
            });

            //input Mix
            $(ui.pattern[i]+' .inputCheckCh1Pattern').off('change');
            $(ui.pattern[i]+' .inputCheckCh1Pattern').on('change',function(){
              self.setStatusCombos();
            }); 
            $(ui.pattern[i]+' .inputCheckCh2Pattern').off('change');
            $(ui.pattern[i]+' .inputCheckCh2Pattern').on('change',function(){
              self.setStatusCombos();
            }); 

            for(var ii=1; ii<=2; ii++){
              var num = ii.toString().padStart(2,'0');           

              //inputCheckPattern
              $(ui.pattern[i]+' .inputCheckPattern'+num).attr('elem',ui.pattern[i]);
              $(ui.pattern[i]+' .inputCheckPattern'+num).off('change');
              $(ui.pattern[i]+' .inputCheckPattern'+num).on('change',function(){
                self.setStatusCombos();
              }); 
  
              //inputSelectPattern 
              $(ui.pattern[i]+' .inputSelectPattern'+num).attr('elem',ui.pattern[i]);
              $(ui.pattern[i]+' .inputSelectPattern'+num).off('change');
              $(ui.pattern[i]+' .inputSelectPattern'+num).on('change',function(){
                self.setStatusCombos();
              }); 
  
              //inputStepPattern
              $(ui.pattern[i]+' .inputStepPattern'+num).attr('elem',ui.pattern[i]);
              $(ui.pattern[i]+' .inputStepPattern'+num).off('change');
              $(ui.pattern[i]+' .inputStepPattern'+num).on('change',function(){
                self.setStatusCombos();
              });  

              //inputEffectPattern
              $(ui.pattern[i]+' .inputEffectPattern'+num).attr('elem',ui.pattern[i]);
              $(ui.pattern[i]+' .inputEffectPattern'+num).off('change');
              $(ui.pattern[i]+' .inputEffectPattern'+num).on('change',function(){
                self.setStatusCombos();
              }); 
            }
          }  
        },
        setActionLoad: function(){
          $('#fileInput').on('change', function(event) {
            var archivo = event.target.files[0];
            if (!archivo) {
              console.error('No se seleccion ningn archivo');
              return;
            }
            var lector = new FileReader();
            lector.onload = function(e){
              try {
                app.data = JSON.parse(e.target.result);
                ui.resetPattern();
                ui.getData();
                console.log('success data file load');
              } catch (error) {
                console.error("Error al leer o parsear el archivo:", error);
              } 
            };            
            $('#fileInput').val('');
            lector.readAsText(archivo);
          });

          $('#btnUpload').on('click',function(){           
            $('#fileInput').click();
          });

          $('#btnDownload').on('click',function(){
            ui.setData();
            var data = JSON.stringify(app.data,null,2); 
            // Crear Blob
            var blob = new Blob([data], { type: "application/json" });
            // Crear enlace invisible
            var enlace = document.createElement("a");
            enlace.href = URL.createObjectURL(blob);
            enlace.download = app.data.name+".tsl"; // nombre del archivo
            // Simular clic
            enlace.click();
            // Liberar memoria
            URL.revokeObjectURL(enlace.href);
          });
          
          $('#btnAddPattern').on('click',function(){
            ui.addPattern();  
            ui.setActionCombos(); 
            ui.setStatusCombos();   
            ui.calNPattern(); 
          }); 

          $('#btnRndPattern').on('click',function(){
            ui.addRndPattern();  
            ui.setActionCombos(); 
            ui.setStatusCombos();   
            ui.calNPattern(); 
          });  
        },
        getData: function(){
          $('#dataSetName').val(app.data.name);  

          for(var i=0; i<app.data.data[0].length; i++){ 
            ui.addPattern(); 
            var idElem=ui.pattern[ui.pattern.length-1]; 
            var value = 0;
            var name = '--';
            var pos = 0;

            //Pattern Name
            name = app.getNamePattern(app.data.data[0][i].paramSet['PATCH%COM']);
            $($(idElem+' button')[0]).html(name);
            $(idElem+' .inputPatternName').val(name); 

            //Mix channel
            value = app.getHex2Integer(app.data.data[0][i].paramSet['PATCH%MIXER'][0]);
            if(value===1){ 
              $(idElem+' .inputMixChPattern').prop('checked', true);
            }else{ 
              $(idElem+' .inputMixChPattern').prop('checked', false);
            }
            value = app.getHex2Integer(app.data.data[0][i].paramSet['PATCH%MIXER'][1]);
            if(value===1){ 
              $(idElem+' .inputCheckCh1Pattern').prop('checked', true);
            }else{ 
              $(idElem+' .inputCheckCh1Pattern').prop('checked', false);
            }            
            value = app.getHex2Integer(app.data.data[0][i].paramSet['PATCH%MIXER'][2]); 
            $(idElem+' .inputVolCh1Pattern').val(value);

            value = app.getHex2Integer(app.data.data[0][i].paramSet['PATCH%MIXER'][3]);
            if(value===1){ 
              $(idElem+' .inputCheckCh2Pattern').prop('checked', true);
            }else{ 
              $(idElem+' .inputCheckCh2Pattern').prop('checked', false);
            }
            value = app.getHex2Integer(app.data.data[0][i].paramSet['PATCH%MIXER'][4]); 
            $(idElem+' .inputVolCh2Pattern').val(value);

            for(var iii=1; iii<=2; iii++){
              var num = iii.toString().padStart(2,'0');
              var param = 'PATCH%SLICER('+iii+')';

              //Enabled
              value = app.getHex2Integer(app.data.data[0][i].paramSet[param][1]);
              if(value===1){ 
                $(idElem+' .inputCheckPattern'+num).prop('checked', true);
              }else{ 
                $(idElem+' .inputCheckPattern'+num).prop('checked', false);
              }
              //Pattern Select 
              value = app.getHex2Integer(app.data.data[0][i].paramSet[param][0]); 
              $(idElem+' .inputSelectPattern'+num).val(value.toString().padStart(2,'0'));
              //Effect Type 
              value = app.getHex2Integer(app.data.data[0][i].paramSet[param][2]); 
              $(idElem+' .inputEffectPattern'+num).val(value);
              //Step Number:
              value = app.getHex2Integer(app.data.data[0][i].paramSet[param][3]); 
              $(idElem+' .inputStepPattern'+num).val(value);
              //Step LENGTH.
              pos=4;//init
              for(var ii=pos; ii<pos+24; ii++){ 
                value = app.getHex2Integer(app.data.data[0][i].paramSet[param][ii]);
                $($(idElem+' .inputLengthContPattern'+num+' input')[ii-pos]).val(value);
              } 
              //Step LEVEL.
              pos=4+24;//init + Step len
              for(var ii=pos; ii<pos+24; ii++){ 
                value = app.getHex2Integer(app.data.data[0][i].paramSet[param][ii]);
                $($(idElem+' .inputLevelContPattern'+num+' input')[ii-pos]).val(value);
              } 
              //Step EFFECT.
              pos=4+24+24+24;//init + Step len + step level + band pass
              for(var ii=pos; ii<pos+24; ii++){ 
                value = app.getHex2Integer(app.data.data[0][i].paramSet[param][ii]);
                $($(idElem+' .inputEffectContPattern'+num+' input')[ii-pos]).val(value);
              } 
              //Step PITCH.
              pos=4+24+24+24+24;//init + Step len + step level + band pass + effect level
              for(var ii=pos; ii<pos+24; ii++){ 
                value = app.getHex2Integer(app.data.data[0][i].paramSet[param][ii]);
                $($(idElem+' .inputPitchContPattern'+num+' input')[ii-pos]).val(value);
              } 
            }
          } 
          ui.setActionCombos(); 
          ui.setStatusCombos(); 
          ui.calNPattern(); 
        },
        setData: function(){
          app.data.name = $('#dataSetName').val();  
          app.data.data[0]=[];

          for(var i=0; i<ui.pattern.length; i++){  
            app.addVoidPattern();
          }
          
          for(var i=0; i<app.data.data[0].length; i++){ 
            var idElem=ui.pattern[i]; 
            var value = 0;
            var name = '--';
            var pos = 0;

            //Pattern Name
            name = app.getNamePattern(app.data.data[0][i].paramSet['PATCH%COM']);
            name = $(idElem+' .inputPatternName').val(); 
            app.data.data[0][i].paramSet['PATCH%COM']=app.setStringDecimal2HexArr(name);

            //Mix channel
            value = $(idElem+' .inputMixChPattern').is(':checked')?'01':'00'; 
            app.data.data[0][i].paramSet['PATCH%MIXER'][0]=value;
            
            value = $(idElem+' .inputCheckCh1Pattern').is(':checked')?'01':'00'; 
            app.data.data[0][i].paramSet['PATCH%MIXER'][1]=value;
            value = parseInt($(idElem+' .inputVolCh1Pattern').val());
            value = app.getInteger2Hex(value);
            app.data.data[0][i].paramSet['PATCH%MIXER'][2]=value;

            value = $(idElem+' .inputCheckCh2Pattern').is(':checked')?'01':'00'; 
            app.data.data[0][i].paramSet['PATCH%MIXER'][3]=value;
            value = parseInt($(idElem+' .inputVolCh2Pattern').val());
            value = app.getInteger2Hex(value);
            app.data.data[0][i].paramSet['PATCH%MIXER'][4]=value;
            
            for(var iii=1; iii<=2; iii++){
              var num = iii.toString().padStart(2,'0');
              var param = 'PATCH%SLICER('+iii+')';

              //Enabled
              value = $(idElem+' .inputCheckPattern'+num).is(':checked')?'01':'00'; 
              app.data.data[0][i].paramSet[param][1]=value;
              
              //Pattern Select 
              value = parseInt($(idElem+' .inputSelectPattern'+num).val());
              value = app.getInteger2Hex(value);
              app.data.data[0][i].paramSet[param][0]=value;

              //Effect Type 
              value = parseInt($(idElem+' .inputEffectPattern'+num).val());
              value = app.getInteger2Hex(value);
              app.data.data[0][i].paramSet[param][2]=value;

              //Step Number:            
              value = parseInt($(idElem+' .inputStepPattern'+num).val());
              value = app.getInteger2Hex(value);
              app.data.data[0][i].paramSet[param][3]=value;

              //Step LENGTH.
              pos=4;//init
              for(var ii=0; ii<$(idElem+' .inputLengthContPattern'+num+' input').length; ii++){ 
                value = parseInt($($(idElem+' .inputLengthContPattern'+num+' input')[ii]).val());
                value = app.getInteger2Hex(value);
                app.data.data[0][i].paramSet[param][pos+ii]=value;
              } 
              
              //Step LEVEL.
              pos=4+24;//init + Step len
              for(var ii=0; ii<$(idElem+' .inputLevelContPattern'+num+' input').length; ii++){ 
                value = parseInt($($(idElem+' .inputLevelContPattern'+num+' input')[ii]).val());
                value = app.getInteger2Hex(value);
                app.data.data[0][i].paramSet[param][pos+ii]=value;
              } 

              //Step EFFECT.
              pos=4+24+24+24;//init + Step len + step level + band pass
              for(var ii=0; ii<$(idElem+' .inputEffectContPattern'+num+' input').length; ii++){ 
                value = parseInt($($(idElem+' .inputEffectContPattern'+num+' input')[ii]).val());
                value = app.getInteger2Hex(value);
                app.data.data[0][i].paramSet[param][pos+ii]=value;
              } 

              //Step PITCH.
              pos=4+24+24+24+24;//init + Step len + step level + band pass + effect level
              for(var ii=0; ii<$(idElem+' .inputPitchContPattern'+num+' input').length; ii++){ 
                value = parseInt($($(idElem+' .inputPitchContPattern'+num+' input')[ii]).val());
                value = app.getInteger2Hex(value);
                app.data.data[0][i].paramSet[param][pos+ii]=value;
              } 
            }
          } 
        },
        init: function(){ 
          var modal = new bootstrap.Modal('#modalLoading',{
            keyboard: false,
            focus: false, 
            backdrop: 'static'
          });
          modal.show();
          ui.setActionLoad(); 
          ui.setActionCombos(); 
          ui.setStatusCombos(); 
          ui.calNPattern();
          app.init().then(function(){
            ui.getData();
            $('.container').removeClass('d-none'); 
            $('#btnRndPattern').trigger('click');
            modal.hide();            
            $($('#pattern_001 button')[0]).trigger('click');
          }); 
        }
      }
      ui.init(); 
    </script>
  </body>
</html>